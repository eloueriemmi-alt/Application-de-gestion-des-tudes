<div class="statistics-container">
  <nav class="navbar">
    <div class="navbar-brand">
      <h2>ğŸ“Š Statistiques</h2>
    </div>
    <div class="navbar-actions">
      <button (click)="goToDashboard()" class="btn-secondary">
        â† Dashboard
      </button>
      <button (click)="logout()" class="logout-button">
        DÃ©connexion
      </button>
    </div>
  </nav>

  <div class="content">
    <div *ngIf="isLoading" class="loading">
      Chargement des statistiques...
    </div>

    <div *ngIf="!isLoading">
      <!-- Cartes statistiques -->
      <div class="stats-grid">
        <div class="stat-card blue">
          <div class="stat-icon">ğŸ‘¨â€ğŸ“</div>
          <div class="stat-info">
            <p class="stat-label">Total Ã‰lÃ¨ves</p>
            <p class="stat-value">{{ totalStudents }}</p>
          </div>
        </div>

        <div class="stat-card green">
          <div class="stat-icon">ğŸ’°</div>
          <div class="stat-info">
            <p class="stat-label">Revenus Totaux</p>
            <p class="stat-value">{{ totalRevenue.toFixed(2) }} DT</p>
          </div>
        </div>

        <div class="stat-card purple">
          <div class="stat-icon">ğŸ“‹</div>
          <div class="stat-info">
            <p class="stat-label">Taux de PrÃ©sence</p>
            <p class="stat-value">{{ averageAttendanceRate }}%</p>
          </div>
        </div>

        <div class="stat-card orange">
          <div class="stat-icon">ğŸ’³</div>
          <div class="stat-info">
            <p class="stat-label">Total Paiements</p>
            <p class="stat-value">{{ totalPayments }}</p>
          </div>
        </div>
      </div>

      <!-- Graphiques -->
      <div class="charts-grid">
        <!-- Revenus par mois -->
        <div class="chart-card">
          <h3>ğŸ“ˆ Revenus par Mois</h3>
          <div class="chart-container">
            <canvas baseChart
              [data]="revenueChartData"
              [options]="revenueChartOptions"
              type="line">
            </canvas>
          </div>
        </div>

        <!-- RÃ©partition des paiements -->
        <div class="chart-card">
          <h3>ğŸ’³ MÃ©thodes de Paiement</h3>
          <div class="chart-container">
            <canvas baseChart
              [data]="paymentMethodChartData"
              [options]="paymentMethodChartOptions"
              type="pie">
            </canvas>
          </div>
        </div>

        <!-- Taux de prÃ©sence -->
        <div class="chart-card">
          <h3>ğŸ“‹ PrÃ©sences / Absences</h3>
          <div class="chart-container">
            <canvas baseChart
              [data]="attendanceChartData"
              [options]="attendanceChartOptions"
              type="doughnut">
            </canvas>
          </div>
        </div>

        <!-- Ã‰lÃ¨ves actifs/inactifs -->
        <div class="chart-card">
          <h3>ğŸ‘¥ Statut des Ã‰lÃ¨ves</h3>
          <div class="chart-container">
            <canvas baseChart
              [data]="studentsChartData"
              [options]="studentsChartOptions"
              type="bar">
            </canvas>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>