<div class="students-container">
  <nav class="navbar">
    <div class="navbar-brand">
      <h2>ğŸ“ Gestion des Ã‰lÃ¨ves</h2>
    </div>
    <div class="navbar-actions">
      <button (click)="goToDashboard()" class="btn-secondary">
        â† Dashboard
      </button>
      <button (click)="logout()" class="logout-button">
        DÃ©connexion
      </button>
    </div>
  </nav>

 <div class="header-actions">
      <h1>Liste des Ã‰lÃ¨ves</h1>
      <div class="action-buttons">
        <button (click)="exportToPDF()" class="btn-export btn-pdf">
          ğŸ“„ Export PDF
        </button>
        <button (click)="exportToExcel()" class="btn-export btn-excel">
          ğŸ“Š Export Excel
        </button>
        <button (click)="openAddForm()" class="btn-primary">
          + Ajouter un Ã©lÃ¨ve
        </button>
      </div>
    </div>

    <!-- Barre de recherche et filtres -->
    <div class="filters-container">
      <div class="search-box">
        <input 
          type="text" 
          [(ngModel)]="searchTerm" 
          (input)="applyFilters()"
          placeholder="ğŸ” Rechercher par nom, prÃ©nom ou email..."
          class="search-input">
      </div>
      
      <div class="filters-row">
        <select [(ngModel)]="filterNiveau" (change)="applyFilters()" class="filter-select">
          <option value="">Tous les niveaux</option>
          <option *ngFor="let niveau of niveaux" [value]="niveau">{{ niveau }}</option>
        </select>

        <select [(ngModel)]="filterStatut" (change)="applyFilters()" class="filter-select">
          <option value="">Tous les statuts</option>
          <option value="actif">Actif</option>
          <option value="inactif">Inactif</option>
        </select>

        <button (click)="resetFilters()" class="btn-reset">
          ğŸ”„ RÃ©initialiser
        </button>
      </div>

      <div class="results-info">
        <p>{{ filteredStudents.length }} Ã©lÃ¨ve(s) trouvÃ©(s) sur {{ students.length }}</p>
      </div>
    </div>

    <div *ngIf="isLoading" class="loading">
      Chargement...
    </div>

    <div *ngIf="!isLoading && students.length === 0" class="empty-state">
      <p>Aucun Ã©lÃ¨ve enregistrÃ©</p>
      <button (click)="openAddForm()" class="btn-primary">
        Ajouter le premier Ã©lÃ¨ve
      </button>
    </div>

    <div *ngIf="!isLoading && filteredStudents.length > 0" class="students-grid">
      <div *ngFor="let student of filteredStudents" class="student-card">
        <div class="student-header">
          <h3>{{ student.prenom }} {{ student.nom }}</h3>
          <span class="badge" [class.active]="student.statut === 'actif'">
            {{ student.statut }}
          </span>
        </div>
        <div class="student-info">
          <p><strong>ğŸ“§ Email:</strong> {{ student.email }}</p>
          <p *ngIf="student.telephone"><strong>ğŸ“± TÃ©l:</strong> {{ student.telephone }}</p>
          <p *ngIf="student.niveau"><strong>ğŸ“š Niveau:</strong> {{ student.niveau }}</p>
          <p *ngIf="student.dateNaissance"><strong>ğŸ‚ NÃ©(e) le:</strong> {{ student.dateNaissance }}</p>
          <p *ngIf="student.adresse"><strong>ğŸ“ Adresse:</strong> {{ student.adresse }}</p>
        </div>
        <div class="student-actions">
          <button (click)="openEditForm(student)" class="btn-edit">
            âœï¸ Modifier
          </button>
          <button (click)="deleteStudent(student.id!)" class="btn-delete">
            ğŸ—‘ï¸ Supprimer
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Formulaire -->
  <div *ngIf="showForm" class="modal-overlay" (click)="closeForm()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h2>{{ editMode ? 'Modifier' : 'Ajouter' }} un Ã©lÃ¨ve</h2>
      
      <form (ngSubmit)="saveStudent()" class="student-form">
        <div class="form-row">
          <div class="form-group">
            <label>Nom *</label>
            <input type="text" [(ngModel)]="currentStudent.nom" name="nom" required>
          </div>
          <div class="form-group">
            <label>PrÃ©nom *</label>
            <input type="text" [(ngModel)]="currentStudent.prenom" name="prenom" required>
          </div>
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="email" [(ngModel)]="currentStudent.email" name="email" >
        </div>

        <div class="form-group">
          <label>TÃ©lÃ©phone</label>
          <input type="text" [(ngModel)]="currentStudent.telephone" name="telephone" placeholder="+216...">
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Date de naissance</label>
            <input type="date" [(ngModel)]="currentStudent.dateNaissance" name="dateNaissance">
          </div>
          <div class="form-group">
            <label>Niveau</label>
            <input type="text" [(ngModel)]="currentStudent.niveau" name="niveau" placeholder="Ex: 3Ã¨me annÃ©e">
          </div>
        </div>

        <div class="form-group">
          <label>Adresse</label>
          <input type="text" [(ngModel)]="currentStudent.adresse" name="adresse">
        </div>
<h3 style="margin: 20px 0 10px 0; color: #667eea; border-bottom: 2px solid #667eea; padding-bottom: 10px;">
          ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦ Informations du Parent/Tuteur
        </h3>

        <div class="form-row">
          <div class="form-group">
            <label>Nom du parent</label>
            <input type="text" [(ngModel)]="currentStudent.nomParent" name="nomParent">
          </div>
          <div class="form-group">
            <label>PrÃ©nom du parent</label>
            <input type="text" [(ngModel)]="currentStudent.prenomParent" name="prenomParent">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>TÃ©lÃ©phone du parent</label>
            <input type="text" [(ngModel)]="currentStudent.telephoneParent" name="telephoneParent" placeholder="+216...">
          </div>
          <div class="form-group">
            <label>Email du parent</label>
            <input type="email" [(ngModel)]="currentStudent.emailParent" name="emailParent">
          </div>
        </div>

        <div class="form-group">
          <label>Statut</label>
          <select [(ngModel)]="currentStudent.statut" name="statut">
            <option value="actif">Actif</option>
            <option value="inactif">Inactif</option>
          </select>
        </div>

        <div class="modal-actions">
          <button type="button" (click)="closeForm()" class="btn-secondary">
            Annuler
          </button>
          <button type="submit" class="btn-primary">
            {{ editMode ? 'Modifier' : 'Ajouter' }}
          </button>
        </div>
      </form>
    </div>
  </div>
